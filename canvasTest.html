<html>
<script>
CanvasRenderingContext2D.prototype.strokeCircle = function(x, y, radius){
	this.beginPath();
	this.arc(x, y, radius, 0, Math.PI * 2);
	this.stroke();
};
CanvasRenderingContext2D.prototype.fillCircle = function(x, y, radius){
	this.beginPath();
	this.arc(x, y, radius, 0, Math.PI * 2);
	this.fill();
};
CanvasRenderingContext2D.prototype.fillEllipse = function(x, y, xr, yr) {
  var kappa = .5522848;
      ox = xr * kappa, // control point offset horizontal
      oy = yr * kappa, // control point offset vertical
      xe = x + xr;       // x-end
      ye = y + yr,       // y-end
      xs = x - xr,       // x-start
      ys = y - yr;       // y-start

  this.beginPath();
  this.moveTo(xs, y);
  this.bezierCurveTo(xs, y - oy, x - ox, ys, x, ys);
  this.bezierCurveTo(x + ox, ys, xe, y - oy, xe, y);
  this.bezierCurveTo(xe, y + oy, x + ox, ye, x, ye);
  this.bezierCurveTo(x - ox, ye, xs, y + oy, xs, y);
  this.closePath();
  this.fill();
}
window.onload = function(){
	var ctx = document.getElementsByTagName('canvas')[0].getContext('2d'),
		canvasHeight = ctx.canvas.height,
		ballRadius = 20,
		a1 = canvasHeight - ballRadius,
		a2 = canvasHeight - ballRadius*2,
		speed = 1/500,
		decay = 500;
		f = function(t){
			var y = a1-(Math.abs(Math.sin(t*speed)*a2)*(decay/(t+1)));
			ctx.fillStyle = "#fff";
			ctx.fillRect(0,0,200,400);
			ctx.fillStyle = "#f00";
			if(y<a1)
				ctx.fillCircle(100,y,20);
			else
				ctx.fillEllipse(100,y,ballRadius-(a1-y),ballRadius+(a1-y));
			ctx.fillStyle = "rgba(255,255,255,0.5)";
			ctx.fillCircle(105,y-5,10);
			requestAnimationFrame(f);
		};
		requestAnimationFrame(f);
}
</script>
<canvas height="400" width="200"></canvas>
</html>